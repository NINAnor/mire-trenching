[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Mire trenching indicator",
    "section": "",
    "text": "1 Background and aims\nIn order to describe the ecological condition of wetland, an inclusion of hydrology is essential. Still, there are no operational ecosystem condition indicators that adequately describe the hydrological status of wetlands in Norway.\nIn Norway, trenching in order to lower the water table of mires has been widely conducted for centuries, and systematically conducted for about 150 years, most commonly in order to facilitate the cultivation of crops or trees. Today, the creation of new trenches is not allowed, yet the scars of old and also more recently made or maintained trenches are evident in the landscape. Many of the trenched ares have changed from open wetlands into forest or agriculture.\nThere are no official maps of mire trenches in Norway. In order to make such a map, Vegar Bakkestuen and colleagues did a pilot study to see if they could identify trenches from LiDAR (Jansson et al. 2024). After annotating ground-trouthed data from several regions in Norway, they trained a deep-learning algorithm to estimate the probability of the occurrence of trenches. The model was applied to a number of smaller study areas in Norway. The results were promising, and efforts are underway to scale up this model and predict mire trenches across Norway.\nThe trenching map provides a probability for the occurrence of trenches in 1x1 m grid cells. Although the deep learning model is trained on trenches in mires, forests and swamp forests, the map identifies trenches across whole landscapes, including trenches in agricultural areas, road ditches, etc.\nThis projects goal is to develop a concept for how a forthcomming national trenching map can be used to characterize the hydrological status of mires in Norway though the use of a normative indicator. Some of the requirements for such an indicator include having area-representative data (i.e.¬†wall-to-wall data or balanced on key environmental variables), and the ability to regularly update the indicator values based on new information. It is also recommended that indicators are based on open data and source code.\n\n\n\n\nJansson, U., Bakkestuen, V., Lyngstad, A., and Mienna, I.M. 2024. Utvikling av gr√∏ftekart i myr og torvmark i norge med hjelp av dypl√¶ring.",
    "crumbs": [
      "<span class='chapter-number'>1</span>¬† <span class='chapter-title'>Background and aims</span>"
    ]
  },
  {
    "objectID": "study-area.html",
    "href": "study-area.html",
    "title": "2¬† Study area and trenching data",
    "section": "",
    "text": "2.1 Adding AR5\nThe open wetlands, shown as red areas in Figure¬†2.2, are largely laying outside of the systematically trenched areas. This can be because the trenched areas, which may have been open mire to begin with, now are overgrown with trees. The map of open mires is in way trained to find areas that are not trenched, so no wonder if the ecosystem condition looks good in these areas. Instead I think we should include forested mires in the Ecosystem Type (ET). We can use the mire class in the AR5 maps in addition to the open mires map. AR5 underestimates the total mire area, but it probably includes more forested mires. Another alternative would be to use the new Ecosystem Map of Norway (Strand et al. 2023), but this uses AR50, i.e.¬†as coarser generalization of AR5.\nar5 &lt;- readRDS(\"data/ar5.rds\")\nggplot() + \n  geom_sf(data = ar5,\n          aes(fill = Arealtype)) +\n  geom_sf(data = lev_crop,\n          fill = \"yellow\",\n          color = \"yellow\")\n\n\n\n\n\n\nFigure¬†2.3: AR5 overlayed with the mire trenches data. AR5 classifies the systamtically trenched peatlands as mire.\nLet‚Äôs separate out the areas that are mire in AR5, but not in the open mire map.\nFilter data# make the ecosystem delineation map into polygons\nmire &lt;- st_as_sf(mire10_crop, merge = T)\nmire_gg &lt;- ggplot(data = mire)+\n  geom_sf(fill = \"blue\")+\n  labs(title = \"Open mire model\")\n\n# Filter out the mire part of AR5\nar5_myr &lt;- ar5 |&gt;\n  filter(Arealtype == \"Myr\")\n# this is a multipolygon\nar5_myr_gg &lt;- ggplot(data = ar5_myr)+\n  geom_sf(fill = \"orange\")+\n  labs(title = \"AR5\")\n\n# Take out the open mire part of AR5 (leaving the forested peatlands)\nst_erase = function(x, y) st_difference(x, st_union(st_combine(y)))\nar5_nonOpen &lt;- ar5_myr |&gt;\n  st_erase(mire)\n\n# Take out the AR5 part of the open mire model\nonly_open &lt;- mire |&gt;\n  st_erase(ar5_myr)\n\nonly_open_gg &lt;- ggplot(data = only_open)+\n  geom_sf(fill = \"purple\")+\n  labs(title = \"Open mires not in AR5\")\n\nar5_nonOpen_gg &lt;- \n  ggplot(data = ar5_nonOpen)+\n  geom_sf(fill = \"orange\")+\n  labs(title = \"AR5 minus open mires\")\n\n# check that polygons dont overlap\ncheck &lt;- \n  ggplot(data = ar5_nonOpen)+\n  geom_sf(fill = \"red\",\n          alpha=.5)+\n  geom_sf(data = mire,\n          fill = \"blue\",\n          alpha=.5)+\n  labs(title = \"AR5 (red) and open mires\\n (blue) combined\")\n\n# combine into new mire map\npeatlands &lt;- ar5_myr |&gt;\n  st_union(mire)\n\npeatlands_gg &lt;- ggplot(data = peatlands)+\n  geom_sf(fill = \"green\")+\n  labs(title = \"AR5 + open mires\")\nPlot dataggarrange(mire_gg, \n          ar5_myr_gg, \n          ar5_nonOpen_gg, \n          only_open_gg,\n          check, \n          peatlands_gg,\n          ncol=2, nrow=3)\n\n\n\n\n\n\nFigure¬†2.4: ‚ÄúDifferent combinations of the open mire model and the AR5 mire category.‚Äù",
    "crumbs": [
      "<span class='chapter-number'>2</span>¬† <span class='chapter-title'>Study area and trenching data</span>"
    ]
  },
  {
    "objectID": "delineation.html",
    "href": "delineation.html",
    "title": "3¬† Delineation",
    "section": "",
    "text": "3.1 The importance of the ecosystem accounting area\nWe presented a study area that is practically square (Figure¬†2.1). However, for the purpose of an ecosystem condition account or assessment, this area needs to be partitioned into unique and non-overlapping ecosystems, and our indicator needs to address the ecosystem condition the target ecosystem explicitly. The ecosystem that this indicator is aimed at is wetlands, or v√•tmark in Norwegian.\nWe might therefore need to mask our spatial data at some stage in order to exclude trenches identified in other ecosystems. However, this is problematic for several reasons.\nFirst, we do not have an official ecosystem delineation map, and it is not yet clear if the ecosystem should be defined as all types of wetlands, or just open wetlands. In the case of the latter, we have a quite good ecosystem map that we can use (Figure¬†2.2). Alternatively, we can use things like AR5, or a combination of the two.\nSecondly, by excluding everything that is no (open) mire, we automatically exclude wetlands, or previous wetlands, that have become forested due to the lowered water table that comes from trenching. In other words, we exclude the areas that are in the worst condition. From Figure¬†2.2 we can see that this is a very common scenario.\nThirdly, when it comes to updating the indicator in the future (see Chapter 5), we will be in the case that more and more trenched wetland becomes classified as other nature types, mainly forests, because that is what happends when you trench a mire. As a consequence, the indicator values will look better and better over time, reflection the land use change and the associated loss of the areas in worst condition.\nThis is a well known issue in ecosystem accounting (ref Jacobson).\nWe may chose to\nThe third option is perhaps not ideal due to significant model errors, for example that the trenches map includes road ditches, agricultural drainage ditches, and ditches in mountains or other areas that have never been wetlands.\nThe first option is the one that best fit the accounting standards. The suggested way to overcome the false message that wetlands may develop better ecosystem condition just because the worst areas become classified as forests, is to always look at the condition assessment in light of, and at the same time as, an ecosystem extent account. Then the loss of wetland area will still make red flags, even though it is documented in the extent account and not the condition account.\nIt can be very tempting to go for option 2, but as you can see, the consequent double-counting of the same process then becomes unavoidable. We will therefore go for option 1 here, using the open mire delineation map as our ecosystem assets. However, in the future, if the target ecosystem becomes defined as to include forested mires, then it is not a problem to update this indicator to include such areas as well.",
    "crumbs": [
      "<span class='chapter-number'>3</span>¬† <span class='chapter-title'>Delineation</span>"
    ]
  },
  {
    "objectID": "delineation.html#the-importance-of-the-ecosystem-accounting-area",
    "href": "delineation.html#the-importance-of-the-ecosystem-accounting-area",
    "title": "3¬† Delineation",
    "section": "",
    "text": "strictly follow the UN standard for ecosystem accounting and only focus on the open mires (and/or AR5 mires).\nmask the data against both mires and forests\nno masking, calculating the variable for all areas regardless of nature type",
    "crumbs": [
      "<span class='chapter-number'>3</span>¬† <span class='chapter-title'>Delineation</span>"
    ]
  },
  {
    "objectID": "metrics.html",
    "href": "metrics.html",
    "title": "4¬† Possible metrics",
    "section": "",
    "text": "4.1 Frequency-based metrics\nThe frequency of trenches can be measured in many ways and at many different scales. One way is to use the method described for NiN variable 7TK (Rune Halvorsen and Harald Bratli 2019). This approach consists of gridding the entire study region into 10ùñ∑10 m cells, and then categorizing the cells as having or not having trenches. The frequency of grid cells with trenches determines the variable value. There is a worked example of this in Chapter 6.\nThe upper and lower reference values for the variable may be defined using the natural value of 0% and 100%, respectively. However, the rescaling of the variable into an indicator should probably follow some non-linear function, potentially aided by a threshold value representing the value of the variable that defines the separation distinction good and bad ecosystem condition (ref). Expert opinion, possibly aided by real word data or visual aids such as areal photos of areas with different variable value, could be used to set this threshold value.\nA different option for a frequency-based metric include counting the proportion of mire units (e.g.¬†hydrological units) that are affected by trenching. This approach require that we know the population of mire units, or that we have a good, balanced sample of such units, to base our metric on. We do not have this currently. Secondly, the metric, as is it described here, becomes quite sensible to errors in the trenching model, and would probably require setting some (arbitrary) threshold value for the severity of trenching on each mire unit.",
    "crumbs": [
      "<span class='chapter-number'>4</span>¬† <span class='chapter-title'>Possible metrics</span>"
    ]
  },
  {
    "objectID": "metrics.html#length-based-metrics",
    "href": "metrics.html#length-based-metrics",
    "title": "4¬† Possible metrics",
    "section": "4.2 Length based metrics",
    "text": "4.2 Length based metrics\nAs describes earlier, the length of trenches, and therefore also the accumulated length for any given area, may be approximated by using half the circumference of the trenching polygons (minus some small penalty). This metric is very simple and easily interpretable. The metric is also ecologically relevant, as the length of trenches is probably among the metrices that best explain the impact of trenching on the landscape (in combination with the depth of the trenches, but this is not something we have data on currently).\nThe upper reference value must be defined as 0 m of trenches. The lower reference value is not obvious, nor the threshold value. These could be defined using expert opinion, as described for Section 4.1.\n\n4.2.1 Area-based metric\nThe area affected by trenching can perhaps be estimated by adding a buffer on the trenching polygons. The area affected by trenching as a proportion of the total mire area is a nice and simple concept for an indicator. The challenge is how to define the buffer. 10 m buffers have been used in the past. However, the size of the effect from a trench decreases non-linearly from the center of the ditch, and the length of the effect zone will depend a lot on the local typography. Ditches at the bottom of sloping mires will be more effective at draining water from the mire than a trench located near the top. Perhaps information about sloe could be included in the calculation of buffer widths?",
    "crumbs": [
      "<span class='chapter-number'>4</span>¬† <span class='chapter-title'>Possible metrics</span>"
    ]
  },
  {
    "objectID": "metrics.html#scalability",
    "href": "metrics.html#scalability",
    "title": "4¬† Possible metrics",
    "section": "4.3 Scalability",
    "text": "4.3 Scalability\nThe metric chosen to inform the indicator on trenching should idealy be scalable, meaning it can be calculated or interpreted at different scale. The indicator might be useful for regional assessment of wetland condition, as well as in local or project scale assessment, for example in association with environmental impact assessments for new building projects.\nI believe the three methods describe above all all scalable and could be used at local scales as well as regional scale (which is the main focus here).\n\n\n\n\nRune Halvorsen, and Harald Bratli. 2019. Dokumentasjon av NiN versjon 2.2 tilrettelagt for praktisk naturkartlegging: Utvalgte variabler fra beskrivelsessystemet.  natur i norge, artikkel 11 (versjon 2.2.0).",
    "crumbs": [
      "<span class='chapter-number'>4</span>¬† <span class='chapter-title'>Possible metrics</span>"
    ]
  },
  {
    "objectID": "how-to-update.html#footnotes",
    "href": "how-to-update.html#footnotes",
    "title": "5¬† Options for updating the trenching indicator",
    "section": "",
    "text": "https://services.arcgis.com/2JlC1JM9VNKvqb4F/arcgis/rest/services/Myrrestaurering_Groft_Torvtak_3_visning/FeatureServer‚Ü©Ô∏é",
    "crumbs": [
      "<span class='chapter-number'>5</span>¬† <span class='chapter-title'>Options for updating the trenching indicator</span>"
    ]
  },
  {
    "objectID": "7TK.html",
    "href": "7TK.html",
    "title": "6¬† Frequency-based metric",
    "section": "",
    "text": "Here I will exemplify the frequency based metric using a method similar to the 7TK variable in NiN.\nMaking a 100x100m grid over the stydy area (the smaller zoomed in area from Figure¬†2.2).\n\nMake gridgrid100 &lt;- sf::st_make_grid(lev_crop,\n                 cellsize = 100) |&gt;\n  st_sf()\n  \nid &lt;- sample(1:nrow(grid100))\ngrid100 &lt;- grid100 |&gt;\n  add_column(id = id)\n\nplot(grid100)\n\n\n\n\n\n\nFigure¬†6.1: 100x100m grid over the stydu area bbox, with random grid cell IDs.\n\n\n\n\nThen I intersect the trenches data with the grid.\n\n\nIntersect trenches and grid cellstrench_in_cell &lt;- st_intersection(lev_crop, grid100)\n#trench_in_cell &lt;- st_join(lev_crop, grid100, join=st_within)\n\ntrench_in_cell |&gt;\n  ggplot()+\n  geom_sf(data = grid100)+\n  geom_sf(aes(color = factor(id),\n              fill = factor(id)))+\n  guides(fill = \"none\",\n         color = \"none\") +\n  theme_bw()\n\n\n\n\n\n\nFigure¬†6.2: ‚ÄúStudy area gridded with 100x100 m cells and trenches labled according to grid ID‚Äù\n\n\n\n\nThen I collapse the dataframe into unique grid cell IDs and mark these as 1‚Äôs (presenses).\nI then join this data with grid100 and plot it.\n\nShow codegrid100_pa &lt;- trench_in_cell |&gt;\n  st_set_geometry(NULL) |&gt;\n  group_by(id) |&gt;\n  summarise(n = n()) |&gt;\n  add_column(trenched = 1) |&gt;\n  select(-n) |&gt;\n  right_join(grid100, by = \"id\") |&gt;\n  mutate(trenched = case_when(\n    is.na(trenched) ~ 0,\n    .default = trenched\n  )) |&gt;\n  st_as_sf()\n\ngrid100_pa |&gt;\n  ggplot() +\n  geom_sf(aes(fill = factor(trenched)),\n          na.rm = TRUE)+\n  theme_bw() +\n  geom_sf(data = trench_in_cell)\n\n\n\n\n\n\nFigure¬†6.3: ‚ÄúMap of study area showing 100x100m grid cells classed as either trenched (blue) or not trenched (red).‚Äù\n\n\n\n\nThe example in Figure¬†6.3 is done on 100x100 grid cell just for illustration. I will now do the same, but on 10x10m grid cells, and then calculate the proportion of trenched 10x10 grid cells inside each 100x100m grid cell. The proportion of 10x10 grid cells could be aggregated to any geometry, such as a region, a municipality or a project area.\n\nShow codegrid10 &lt;- sf::st_make_grid(grid100,\n                cellsize = 10) |&gt;\n  st_sf()\n\n# align perfectly with grid100 and carry the id from grid100 to grid10\ngrid10 &lt;- grid10 |&gt; \n  st_intersection(grid100) |&gt;\n  mutate(\n    area = units::drop_units(\n      st_area(sf..st_make_grid.grid100..cellsize...10.)),\n    exclude = case_when(\n      area &lt; 50 ~ 1,\n      .default = 0\n         )) |&gt;\n  filter(exclude != 1)\n\n\nid10 &lt;- sample(1:nrow(grid10))\ngrid10 &lt;- grid10 |&gt;\n  add_column(id10 = id10) |&gt;\n  select(id, id10)\n\n#plot(grid10)\n\ntrench_in_cell10 &lt;- st_intersection(lev_crop, grid10)\n\ngrid100_freq &lt;- trench_in_cell10 |&gt;\n  st_set_geometry(NULL) |&gt;\n  group_by(id10) |&gt;\n  summarise(n = n()) |&gt;\n  ungroup() |&gt;\n  add_column(trenched = 1) |&gt;\n  select(-n) |&gt;\n  right_join(grid10, by = \"id10\") |&gt;\n  mutate(trenched = case_when(\n    is.na(trenched) ~ 0,\n    .default = trenched\n  )) |&gt;\n  group_by(id) |&gt;\n  summarise(freq = mean(trenched)*100) |&gt;\n  #st_as_sf() |&gt;\n  #st_intersection(grid100) |&gt;\n  right_join(grid100, by = \"id\") |&gt;\n  st_as_sf()\n\ngrid100_freq |&gt;\n  ggplot() +\n  geom_sf(aes(fill = freq))+\n  theme_bw() +\n  geom_sf(data = trench_in_cell)\n\n\n\n\n\n\nFigure¬†6.4: ‚ÄúMap of study area showing the 100x100 grid cells that are colored based on the percentage of 10x10m grid cells that have a trench in them.‚Äù\n\n\n\n\nFigure¬†6.4 shows the trenching variable in its raw units (%) over the entire study area. The next step is then to exclude areas that are not part of the target ecosystem, i.e.¬†not part of the accounting area. This can be done on the 100x100 grid level, put probably more correct to do it at the 10x10m grid level.\n\nShow code# make the ecosystem delineation map into polygons\nmire &lt;- st_as_sf(mire10_crop, merge = T)\n\ngrid100_freq2 &lt;- trench_in_cell10 |&gt;\n  st_intersection(mire) |&gt;\n  st_drop_geometry() |&gt;\n  group_by(id10) |&gt;\n  summarise(n = n()) |&gt;\n  ungroup() |&gt;\n  add_column(trenched = 1) |&gt;\n  select(-n) |&gt;\n  right_join(grid10, by = \"id10\") |&gt;\n  mutate(trenched = case_when(\n    is.na(trenched) ~ 0,\n    .default = trenched\n  )) |&gt;\n  st_as_sf() |&gt;\n  st_intersection(mire) |&gt;\n  st_drop_geometry() |&gt;\n  group_by(id) |&gt;\n  summarise(freq = mean(trenched)*100) |&gt;\n  #st_as_sf() |&gt;\n  #st_intersection(grid100) |&gt;\n  right_join(grid100, by = \"id\") |&gt;\n  st_as_sf() |&gt;\n  st_intersection(mire)\n\nhigh &lt;- \"red\"\nlow &lt;- \"green\"\n\n\ngrid100_freq2 |&gt;\n  ggplot() +\n  geom_sf(aes(fill = freq))+\n  theme_bw() +\n  geom_sf(data = trench_in_cell)+\n  scale_fill_gradient(\"Frequency of trenches\", low = low, \n        high = high)\n\n\n\n\n\n\nFigure¬†6.5: ‚ÄúMap of study area (masked against mire extent) showing 100x100m grid cells colored by the proportion of 10x10 grid cells inside them which are trenched.‚Äù\n\n\n\n\nThe three grid cells with the highest proportion of trenched 10x10m grid cells have 94, 86, and 83 percent. The three cells visible in Figure¬†6.5 with the darkest red color all seem to be relatively densely trenched. Probably we need to adjust the threshold value so that at least these three all get quite low indicator values. I will set 10% as the threshold value and 50% as the low reference point. I will fit the data using a sigmoid function to soften arbitrary break points.\n\nShow codeea_normalise(\n  data = grid100_freq2,\n  vector = \"freq\",\n  upper_reference_level = 50,\n  lower_reference_level = 0,\n  break_point = 10,\n  scaling_function = \"sigmoid\",\n  reverse=T,\n  plot = T)\n\nWarning in ggridges::geom_density_ridges_gradient(scale = 3, size = 0.3):\nIgnoring unknown parameters: `size`\n\n\n\n\n\n\n\nFigure¬†6.6: ‚ÄúNormalisation of the variable ‚ÄòPorportion of small grid cells with trenching‚Äô based on a sigmoid transformation function and thee numerical reference points.‚Äù\n\n\n\n\n\nAdding the normalised datagrid100_freq2 &lt;- grid100_freq2 |&gt;\n  mutate(indicator = \n           ea_normalise(\n  data = grid100_freq2,\n  vector = \"freq\",\n  upper_reference_level = 50,\n  lower_reference_level = 0,\n  break_point = 10,\n  scaling_function = \"sigmoid\",\n  reverse=T,\n  plot = F))\n\ngrid100_freq2 |&gt;\n  ggplot() +\n  geom_sf(aes(fill = indicator))+\n  theme_bw() +\n  geom_sf(data = trench_in_cell)+\n  scale_fill_gradient(\n    \"Indicator value\", \n    low = high, \n    high = low)\n\n\n\n\n\n\nFigure¬†6.7: ‚ÄúSame figure as the previous map, but with the trenching variable normalised into indicator values.‚Äù\n\n\n\n\nI think the indicator values are reasonably well represnetative of what I expect the ecological effect of the different trencing densities to be. These reference points are, however, not informed with any data.",
    "crumbs": [
      "<span class='chapter-number'>6</span>¬† <span class='chapter-title'>Frequency-based metric</span>"
    ]
  }
]